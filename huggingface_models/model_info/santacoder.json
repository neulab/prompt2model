{"pretrained_model_name": "bigcode/santacoder", "description": "---\nlicense: openrail\ndatasets:\n- bigcode/the-stack\nlanguage:\n- code\nprogramming_language: \n- Java\n- JavaScript\n- Python\npipeline_tag: text-generation\ninference: true\nwidget:\n- text: 'def print_hello_world():'\n  example_title: Hello world\n  group: Python\n\nmodel-index:\n- name: SantaCoder\n  results:\n  - task:\n      type: text-generation\n    dataset:\n      type: nuprl/MultiPL-E\n      name: MultiPL HumanEval (Python)\n    metrics:\n    - name: pass@1\n      type: pass@1\n      value: 0.18\n      verified: false\n    - name: pass@10\n      type: pass@10\n      value: 0.29\n      verified: false\n    - name: pass@100\n      type: pass@100\n      value: 0.49\n      verified: false\n  - task:\n      type: text-generation\n    dataset:\n      type: nuprl/MultiPL-E\n      name: MultiPL MBPP (Python)\n    metrics:\n    - name: pass@1\n      type: pass@1\n      value: 0.35\n      verified: false\n    - name: pass@10\n      type: pass@10\n      value: 0.58\n      verified: false\n    - name: pass@100\n      type: pass@100\n      value: 0.77\n      verified: false\n  - task:\n      type: text-generation\n    dataset:\n      type: nuprl/MultiPL-E\n      name: MultiPL HumanEval (JavaScript)\n    metrics:\n    - name: pass@1\n      type: pass@1\n      value: 0.16\n      verified: false\n    - name: pass@10\n      type: pass@10\n      value: 0.27\n      verified: false\n    - name: pass@100\n      type: pass@100\n      value: 0.47\n      verified: false\n  - task:\n      type: text-generation\n    dataset:\n      type: nuprl/MultiPL-E\n      name: MultiPL MBPP (Javascript)\n    metrics:\n    - name: pass@1\n      type: pass@1\n      value: 0.28\n      verified: false\n    - name: pass@10\n      type: pass@10\n      value: 0.51\n      verified: false\n    - name: pass@100\n      type: pass@100\n      value: 0.70\n      verified: false\n  - task:\n      type: text-generation\n    dataset:\n      type: nuprl/MultiPL-E\n      name: MultiPL HumanEval (Java)\n    metrics:\n    - name: pass@1\n      type: pass@1\n      value: 0.15\n      verified: false\n    - name: pass@10\n      type: pass@10\n      value: 0.26\n      verified: false\n    - name: pass@100\n      type: pass@100\n      value: 0.41\n      verified: false\n  - task:\n      type: text-generation\n    dataset:\n      type: nuprl/MultiPL-E\n      name: MultiPL MBPP (Java)\n    metrics:\n    - name: pass@1\n      type: pass@1\n      value: 0.28\n      verified: false\n    - name: pass@10\n      type: pass@10\n      value: 0.44\n      verified: false\n    - name: pass@100\n      type: pass@100\n      value: 0.59\n      verified: false\n  - task:\n      type: text-generation\n    dataset:\n      type: loubnabnl/humaneval_infilling\n      name: HumanEval FIM (Python)\n    metrics:\n    - name: single_line\n      type: exact_match\n      value: 0.44\n      verified: false\n  - task:\n      type: text-generation\n    dataset:\n      type: nuprl/MultiPL-E\n      name: MultiPL HumanEval FIM (Java)\n    metrics:\n    - name: single_line\n      type: exact_match\n      value: 0.62\n      verified: false\n  - task:\n      type: text-generation\n    dataset:\n      type: nuprl/MultiPL-E\n      name: MultiPL HumanEval FIM (JavaScript)\n    metrics:\n    - name: single_line\n      type: exact_match\n      value: 0.60\n      verified: false\n  - task:\n      type: text-generation\n    dataset:\n      type: code_x_glue_ct_code_to_text\n      name: CodeXGLUE code-to-text (Python)\n    metrics:\n    - name: BLEU\n      type: bleu\n      value: 18.13\n      verified: false\n---\n\n# SantaCoder\n\n![banner](https://huggingface.co/datasets/bigcode/admin/resolve/main/banner.png)\n\nPlay with the model on the [SantaCoder Space Demo](https://huggingface.co/spaces/bigcode/santacoder-demo).\n\n#  Table of Contents\n\n1. [Model Summary](#model-summary)\n2. [Use](#use)\n3. [Limitations](#limitations)\n4. [Training](#training)\n5. [License](#license)\n6. [Citation](#citation)\n\n# Model Summary\n\nThe SantaCoder models are a series of 1.1B parameter models trained on the Python, Java, and JavaScript subset of [The Stack (v1.1)](https://huggingface.co/datasets/bigcode/the-stack) (which excluded opt-out requests). \nThe main model uses [Multi Query Attention](https://arxiv.org/abs/1911.02150), a context window of 2048 tokens, and was trained using near-deduplication and comment-to-code ratio as filtering criteria and using the [Fill-in-the-Middle objective](https://arxiv.org/abs/2207.14255).\nIn addition there are several models that were trained on datasets with different filter parameters and with architecture and objective variations. \n\n- **Repository:** [bigcode/Megatron-LM](https://github.com/bigcode-project/Megatron-LM)\n- **Project Website:** [bigcode-project.org](https://www.bigcode-project.org)\n- **Paper:** [\ud83c\udf85SantaCoder: Don't reach for the stars!\ud83c\udf1f](https://arxiv.org/abs/2301.03988)\n- **Point of Contact:** [contact@bigcode-project.org](mailto:contact@bigcode-project.org)\n- **Languages:** Python, Java, and JavaScript\n\n|Model|Architecture|Objective|Filtering|\n|:-|:-|:-|:-|\n|`mha`|MHA|AR + FIM| Base |\n|`no-fim`| MQA | AR| Base |\n|`fim`| MQA | AR + FIM | Base |\n|`stars`| MQA | AR + FIM | GitHub stars |\n|`fertility`| MQA | AR + FIM | Tokenizer fertility |\n|`comments`| MQA | AR + FIM | Comment-to-code ratio |\n|`dedup-alt`| MQA | AR + FIM | Stronger near-deduplication |\n|`final`| MQA | AR + FIM | Stronger near-deduplication and comment-to-code ratio |\n\nThe `final` model is the best performing model and was trained twice as long (236B tokens) as the others. This checkpoint is the default model and available on the `main` branch. All other checkpoints are on separate branches with according names.\n\n# Use\n\n## Intended use\n\nThe model was trained on GitHub code. As such it is _not_ an instruction model and commands like \"Write a function that computes the square root.\" do not work well.\nYou should phrase commands like they occur in source code such as comments (e.g. `# the following function computes the sqrt`) or write a function signature and docstring and let the model complete the function body.\n\n**Feel free to share your generations in the Community tab!**\n\n## How to use\n\n### Generation\n```python\n# pip install -q transformers\nfrom transformers import AutoModelForCausalLM, AutoTokenizer\n\ncheckpoint = \"bigcode/santacoder\"\ndevice = \"cuda\" # for GPU usage or \"cpu\" for CPU usage\n\ntokenizer = AutoTokenizer.from_pretrained(checkpoint)\nmodel = AutoModelForCausalLM.from_pretrained(checkpoint, trust_remote_code=True).to(device)\n\ninputs = tokenizer.encode(\"def print_hello_world():\", return_tensors=\"pt\").to(device)\noutputs = model.generate(inputs)\nprint(tokenizer.decode(outputs[0]))\n```\n\n### Fill-in-the-middle\nFill-in-the-middle uses special tokens to identify the prefix/middle/suffix part of the input and output:\n\n```python\ninput_text = \"<fim-prefix>def print_hello_world():\\n    <fim-suffix>\\n    print('Hello world!')<fim-middle>\"\ninputs = tokenizer.encode(input_text, return_tensors=\"pt\").to(device)\noutputs = model.generate(inputs)\nprint(tokenizer.decode(outputs[0]))\n```\n\n### Load other checkpoints\nWe upload the checkpoint of each experiment to a separate branch as well as the intermediate checkpoints as commits on the branches. You can load them with the `revision` flag:\n\n```python\nmodel = AutoModelForCausalLM.from_pretrained(\n    \"bigcode/santacoder\",\n    revision=\"no-fim\", # name of branch or commit hash\n    trust_remote_code=True\n)\n```\n\n### Attribution & Other Requirements\n\nThe pretraining dataset of the model was filtered for permissive licenses only. Nevertheless, the model can generate source code verbatim from the dataset. The code's license might require attribution and/or other specific requirements that must be respected. We provide a [search index](https://huggingface.co/spaces/bigcode/santacoder-search) that let's you search through the pretraining data to identify where generated code came from and apply the proper attribution to your code.\n\n# Limitations\n\nThe model has been trained on source code in Python, Java, and JavaScript. The predominant language in source is English although other languages are also present. As such the model is capable to generate code snippets provided some context but the generated code is not guaranteed to work as intended. It can be inefficient, contain bugs or exploits.\n\n# Training\n\n## Model\n\n- **Architecture:** GPT-2 model with multi-query attention and Fill-in-the-Middle objective\n- **Pretraining steps:** 600K\n- **Pretraining tokens:** 236 billion\n- **Precision:** float16\n\n## Hardware\n\n- **GPUs:** 96 Tesla V100\n- **Training time:** 6.2 days\n- **Total FLOPS:** 2.1 x 10e21\n\n## Software\n\n- **Orchestration:** [Megatron-LM](https://github.com/bigcode-project/Megatron-LM)\n- **Neural networks:** [PyTorch](https://github.com/pytorch/pytorch)\n- **FP16 if applicable:** [apex](https://github.com/NVIDIA/apex)\n\n# License\nThe model is licenses under the CodeML Open RAIL-M v0.1 license. You can find the full license [here](https://huggingface.co/spaces/bigcode/license).\n\n# Citation\n```\n@article{allal2023santacoder,\n  title={SantaCoder: don't reach for the stars!},\n  author={Allal, Loubna Ben and Li, Raymond and Kocetkov, Denis and Mou, Chenghao and Akiki, Christopher and Ferrandis, Carlos Munoz and Muennighoff, Niklas and Mishra, Mayank and Gu, Alex and Dey, Manan and others},\n  journal={arXiv preprint arXiv:2301.03988},\n  year={2023}\n}\n```", "size_bytes": "4600328417", "downloads": 1442530}