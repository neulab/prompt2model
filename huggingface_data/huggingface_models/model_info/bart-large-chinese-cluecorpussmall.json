{"pretrained_model_name": "uer/bart-large-chinese-cluecorpussmall", "description": "---\nlanguage: zh\ndatasets: CLUECorpusSmall\nwidget: \n- text: \"\u4f5c\u4e3a\u7535\u5b50[MASK]\u7684\u5e73\u53f0\uff0c\u4eac\u4e1c\u7edd\u5bf9\u662f\u9886\u5148\u8005\u3002\u5982\u4eca\u7684\u5218\u5f3a[MASK]\u5df2\u7ecf\u662f\u8eab\u4ef7\u8fc7[MASK]\u7684\u8001\u677f\u3002\"\n\n\n---\n\n# Chinese BART\n\n## Model description\n\nThis model is pre-trained by [UER-py](https://github.com/dbiir/UER-py/), which is introduced in [this paper](https://arxiv.org/abs/1909.05658).\n\nYou can download the set of Chinese BART models either from the [UER-py Modelzoo page](https://github.com/dbiir/UER-py/wiki/Modelzoo), or via HuggingFace from the links below:\n\n|                   |              Link              |\n| ----------------- | :----------------------------: |\n| **BART-Base** | [**L=6/H=768 (Base)**][base] |\n| **BART-Large**  | [**L=12/H=1024 (Large)**][large] |\n\n## How to use\n\nYou can use this model directly with a pipeline for text2text generation (take the case of BART-Base):\n\n```python\n>>> from transformers import BertTokenizer, BartForConditionalGeneration, Text2TextGenerationPipeline\n>>> tokenizer = BertTokenizer.from_pretrained(\"uer/bart-base-chinese-cluecorpussmall\")\n>>> model = BartForConditionalGeneration.from_pretrained(\"uer/bart-base-chinese-cluecorpussmall\")\n>>> text2text_generator = Text2TextGenerationPipeline(model, tokenizer)  \n>>> text2text_generator(\"\u4e2d\u56fd\u7684\u9996\u90fd\u662f[MASK]\u4eac\", max_length=50, do_sample=False)\n    [{'generated_text': '\u4e2d \u56fd \u7684 \u9996 \u90fd \u662f \u5317 \u4eac'}]\n```\n\n## Training data\n\n[CLUECorpusSmall](https://github.com/CLUEbenchmark/CLUECorpus2020/) is used as training data. \n\n## Training procedure\n\nThe model is pre-trained by [UER-py](https://github.com/dbiir/UER-py/) on [Tencent Cloud](https://cloud.tencent.com/). We pre-train 1,000,000 steps with a sequence length of 512.\nTaking the case of BART-Base\n\n```\npython3 preprocess.py --corpus_path corpora/cluecorpussmall.txt \\\n                      --vocab_path models/google_zh_vocab.txt \\\n                      --dataset_path cluecorpussmall_bart_seq512_dataset.pt \\\n                      --processes_num 32 --seq_length 512 \\\n                      --data_processor bart\n```\n\n```\npython3 pretrain.py --dataset_path cluecorpussmall_bart_seq512_dataset.pt \\\n                    --vocab_path models/google_zh_vocab.txt \\\n                    --config_path models/bart/base_config.json \\\n                    --output_model_path models/cluecorpussmall_bart_base_seq512_model.bin \\\n                    --world_size 8 --gpu_ranks 0 1 2 3 4 5 6 7 \\\n                    --total_steps 1000000 --save_checkpoint_steps 100000 --report_steps 50000 \\\n                    --learning_rate 5e-5 --batch_size 8 \\\n                    --span_masking --span_max_length 3\n```\n\nFinally, we convert the pre-trained model into Huggingface's format:\n\n```\npython3 scripts/convert_bart_from_uer_to_huggingface.py --input_model_path cluecorpussmall_bart_base_seq512_model.bin-1000000 \\                                                                \n                                                        --output_model_path pytorch_model.bin \\                                                                                            \n                                                        --layers_num 6\n```\n\n\n### BibTeX entry and citation info\n\n```\n@article{lewis2019bart,\n  title={Bart: Denoising sequence-to-sequence pre-training for natural language generation, translation, and comprehension},\n  author={Lewis, Mike and Liu, Yinhan and Goyal, Naman and Ghazvininejad, Marjan and Mohamed, Abdelrahman and Levy, Omer and Stoyanov, Ves and Zettlemoyer, Luke},\n  journal={arXiv preprint arXiv:1910.13461},\n  year={2019}\n}\n\n@article{zhao2019uer,\n  title={UER: An Open-Source Toolkit for Pre-training Models},\n  author={Zhao, Zhe and Chen, Hui and Zhang, Jinbin and Zhao, Xin and Liu, Tao and Lu, Wei and Chen, Xi and Deng, Haotang and Ju, Qi and Du, Xiaoyong},\n  journal={EMNLP-IJCNLP 2019},\n  pages={241},\n  year={2019}\n}\n```\n\n[base]:https://huggingface.co/uer/bart-base-chinese-cluecorpussmall\n[large]:https://huggingface.co/uer/bart-large-chinese-cluecorpussmall", "size_bytes": "1506088449", "downloads": 51}