{"pretrained_model_name": "NewBreaker/chatglm-6b-int4", "description": "---\n\nlicense: openrail\ndatasets:\n- humarin/chatgpt-paraphrases\nlanguage:\n- en\nlibrary_name: transformers\ninference:\n  parameters:\n    num_beams: 5\n    num_beam_groups: 5\n    num_return_sequences: 5\n    repetition_penalty: 10.01\n    diversity_penalty: 3.01\n    no_repeat_ngram_size: 2\n    temperature: 0.7\n    max_length: 128\nwidget:\n- text: What are the best places to see in New York?\n  example_title: New York tourist attractions\n- text: When should I go to the doctor?\n  example_title: Doctor's time\n- text: >-\n    Rammstein's album Mutter was recorded in the south of France in May and June\n    2000, and mixed in Stockholm in October of that year.\n  example_title: Rammstein's album Mutter\npipeline_tag: text2text-generation\n\ntags:\n  - conversational\n\n---\n\n\n\n\n\n# ChatGLM-6B-INT4\n\n<p align=\"center\">\n    \ud83d\udc4b Join our <a href=\"https://join.slack.com/t/chatglm/shared_invite/zt-1th2q5u69-7tURzFuOPanmuHy9hsZnKA\" target=\"_blank\">Slack</a> and <a href=\"https://github.com/THUDM/ChatGLM-6B/blob/main/resources/WECHAT.md\" target=\"_blank\">WeChat</a>\n</p>\n\n## \u4ecb\u7ecd\nChatGLM-6B \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u3001\u652f\u6301\u4e2d\u82f1\u53cc\u8bed\u95ee\u7b54\u7684\u5bf9\u8bdd\u8bed\u8a00\u6a21\u578b\uff0c\u57fa\u4e8e [General Language Model (GLM)](https://github.com/THUDM/GLM) \u67b6\u6784\uff0c\u5177\u6709 62 \u4ebf\u53c2\u6570\u3002\u7ed3\u5408\u6a21\u578b\u91cf\u5316\u6280\u672f\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u6d88\u8d39\u7ea7\u7684\u663e\u5361\u4e0a\u8fdb\u884c\u672c\u5730\u90e8\u7f72\uff08INT4 \u91cf\u5316\u7ea7\u522b\u4e0b\u6700\u4f4e\u53ea\u9700 6GB \u663e\u5b58\uff09\u3002ChatGLM-6B \u4f7f\u7528\u4e86\u548c [ChatGLM](https://chatglm.cn) \u76f8\u540c\u7684\u6280\u672f\uff0c\u9488\u5bf9\u4e2d\u6587\u95ee\u7b54\u548c\u5bf9\u8bdd\u8fdb\u884c\u4e86\u4f18\u5316\u3002\u7ecf\u8fc7\u7ea6 1T \u6807\u8bc6\u7b26\u7684\u4e2d\u82f1\u53cc\u8bed\u8bad\u7ec3\uff0c\u8f85\u4ee5\u76d1\u7763\u5fae\u8c03\u3001\u53cd\u9988\u81ea\u52a9\u3001\u4eba\u7c7b\u53cd\u9988\u5f3a\u5316\u5b66\u4e60\u7b49\u6280\u672f\u7684\u52a0\u6301\uff0c62 \u4ebf\u53c2\u6570\u7684 ChatGLM-6B \u5df2\u7ecf\u80fd\u751f\u6210\u76f8\u5f53\u7b26\u5408\u4eba\u7c7b\u504f\u597d\u7684\u56de\u7b54\u3002\n\nChatGLM-6B-INT4 \u662f ChatGLM-6B \u91cf\u5316\u540e\u7684\u6a21\u578b\u6743\u91cd\u3002\u5177\u4f53\u7684\uff0cChatGLM-6B-INT4 \u5bf9 ChatGLM-6B \u4e2d\u7684 28 \u4e2a GLM Block \u8fdb\u884c\u4e86 INT4 \u91cf\u5316\uff0c\u6ca1\u6709\u5bf9 Embedding \u548c LM Head \u8fdb\u884c\u91cf\u5316\u3002\u91cf\u5316\u540e\u7684\u6a21\u578b\u7406\u8bba\u4e0a 6G \u663e\u5b58\uff08\u4f7f\u7528 CPU \u5373\u5185\u5b58\uff09\u5373\u53ef\u63a8\u7406\uff0c\u5177\u6709\u5728\u5d4c\u5165\u5f0f\u8bbe\u5907\uff08\u5982\u6811\u8393\u6d3e\uff09\u4e0a\u8fd0\u884c\u7684\u53ef\u80fd\u3002\n\n\u5728 CPU \u4e0a\u8fd0\u884c\u65f6\uff0c\u4f1a\u6839\u636e\u786c\u4ef6\u81ea\u52a8\u7f16\u8bd1 CPU Kernel \uff0c\u8bf7\u786e\u4fdd\u5df2\u5b89\u88c5 GCC \u548c OpenMP \uff08Linux\u4e00\u822c\u5df2\u5b89\u88c5\uff0c\u5bf9\u4e8eWindows\u5219\u9700\u624b\u52a8\u5b89\u88c5\uff09\uff0c\u4ee5\u83b7\u5f97\u6700\u4f73\u5e76\u884c\u8ba1\u7b97\u80fd\u529b\u3002\n\n## \u8f6f\u4ef6\u4f9d\u8d56\n\n```shell\npip install protobuf transformers==4.27.1 cpm_kernels\n```\n\n## \u4ee3\u7801\u8c03\u7528 \n\n\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u4ee3\u7801\u8c03\u7528 ChatGLM-6B \u6a21\u578b\u6765\u751f\u6210\u5bf9\u8bdd\uff1a\n\n```ipython\n>>> from transformers import AutoTokenizer, AutoModel\n>>> tokenizer = AutoTokenizer.from_pretrained(\"THUDM/chatglm-6b-int4\", trust_remote_code=True)\n>>> model = AutoModel.from_pretrained(\"THUDM/chatglm-6b-int4\", trust_remote_code=True).half().cuda()\n>>> response, history = model.chat(tokenizer, \"\u4f60\u597d\", history=[])\n>>> print(response)\n\u4f60\u597d\ud83d\udc4b!\u6211\u662f\u4eba\u5de5\u667a\u80fd\u52a9\u624b ChatGLM-6B,\u5f88\u9ad8\u5174\u89c1\u5230\u4f60,\u6b22\u8fce\u95ee\u6211\u4efb\u4f55\u95ee\u9898\u3002\n>>> response, history = model.chat(tokenizer, \"\u665a\u4e0a\u7761\u4e0d\u7740\u5e94\u8be5\u600e\u4e48\u529e\", history=history)\n>>> print(response)\n\u665a\u4e0a\u7761\u4e0d\u7740\u53ef\u80fd\u4f1a\u8ba9\u4f60\u611f\u5230\u7126\u8651\u6216\u4e0d\u8212\u670d,\u4f46\u4ee5\u4e0b\u662f\u4e00\u4e9b\u53ef\u4ee5\u5e2e\u52a9\u4f60\u5165\u7761\u7684\u65b9\u6cd5:\n\n1. \u5236\u5b9a\u89c4\u5f8b\u7684\u7761\u7720\u65f6\u95f4\u8868:\u4fdd\u6301\u89c4\u5f8b\u7684\u7761\u7720\u65f6\u95f4\u8868\u53ef\u4ee5\u5e2e\u52a9\u4f60\u5efa\u7acb\u5065\u5eb7\u7684\u7761\u7720\u4e60\u60ef,\u4f7f\u4f60\u66f4\u5bb9\u6613\u5165\u7761\u3002\u5c3d\u91cf\u5728\u6bcf\u5929\u7684\u76f8\u540c\u65f6\u95f4\u4e0a\u5e8a,\u5e76\u5728\u540c\u4e00\u65f6\u95f4\u8d77\u5e8a\u3002\n2. \u521b\u9020\u4e00\u4e2a\u8212\u9002\u7684\u7761\u7720\u73af\u5883:\u786e\u4fdd\u7761\u7720\u73af\u5883\u8212\u9002,\u5b89\u9759,\u9ed1\u6697\u4e14\u6e29\u5ea6\u9002\u5b9c\u3002\u53ef\u4ee5\u4f7f\u7528\u8212\u9002\u7684\u5e8a\u4e0a\u7528\u54c1,\u5e76\u4fdd\u6301\u623f\u95f4\u901a\u98ce\u3002\n3. \u653e\u677e\u8eab\u5fc3:\u5728\u7761\u524d\u505a\u4e9b\u653e\u677e\u7684\u6d3b\u52a8,\u4f8b\u5982\u6ce1\u4e2a\u70ed\u6c34\u6fa1,\u542c\u4e9b\u8f7b\u67d4\u7684\u97f3\u4e50,\u9605\u8bfb\u4e00\u4e9b\u6709\u8da3\u7684\u4e66\u7c4d\u7b49,\u6709\u52a9\u4e8e\u7f13\u89e3\u7d27\u5f20\u548c\u7126\u8651,\u4f7f\u4f60\u66f4\u5bb9\u6613\u5165\u7761\u3002\n4. \u907f\u514d\u996e\u7528\u542b\u6709\u5496\u5561\u56e0\u7684\u996e\u6599:\u5496\u5561\u56e0\u662f\u4e00\u79cd\u523a\u6fc0\u6027\u7269\u8d28,\u4f1a\u5f71\u54cd\u4f60\u7684\u7761\u7720\u8d28\u91cf\u3002\u5c3d\u91cf\u907f\u514d\u5728\u7761\u524d\u996e\u7528\u542b\u6709\u5496\u5561\u56e0\u7684\u996e\u6599,\u4f8b\u5982\u5496\u5561,\u8336\u548c\u53ef\u4e50\u3002\n5. \u907f\u514d\u5728\u5e8a\u4e0a\u505a\u4e0e\u7761\u7720\u65e0\u5173\u7684\u4e8b\u60c5:\u5728\u5e8a\u4e0a\u505a\u4e9b\u4e0e\u7761\u7720\u65e0\u5173\u7684\u4e8b\u60c5,\u4f8b\u5982\u770b\u7535\u5f71,\u73a9\u6e38\u620f\u6216\u5de5\u4f5c\u7b49,\u53ef\u80fd\u4f1a\u5e72\u6270\u4f60\u7684\u7761\u7720\u3002\n6. \u5c1d\u8bd5\u547c\u5438\u6280\u5de7:\u6df1\u547c\u5438\u662f\u4e00\u79cd\u653e\u677e\u6280\u5de7,\u53ef\u4ee5\u5e2e\u52a9\u4f60\u7f13\u89e3\u7d27\u5f20\u548c\u7126\u8651,\u4f7f\u4f60\u66f4\u5bb9\u6613\u5165\u7761\u3002\u8bd5\u7740\u6162\u6162\u5438\u6c14,\u4fdd\u6301\u51e0\u79d2\u949f,\u7136\u540e\u7f13\u6162\u547c\u6c14\u3002\n\n\u5982\u679c\u8fd9\u4e9b\u65b9\u6cd5\u65e0\u6cd5\u5e2e\u52a9\u4f60\u5165\u7761,\u4f60\u53ef\u4ee5\u8003\u8651\u54a8\u8be2\u533b\u751f\u6216\u7761\u7720\u4e13\u5bb6,\u5bfb\u6c42\u8fdb\u4e00\u6b65\u7684\u5efa\u8bae\u3002\n```\n\n\u5173\u4e8e\u66f4\u591a\u7684\u4f7f\u7528\u8bf4\u660e\uff0c\u5305\u62ec\u5982\u4f55\u8fd0\u884c\u547d\u4ee4\u884c\u548c\u7f51\u9875\u7248\u672c\u7684 DEMO\uff0c\u4ee5\u53ca\u4f7f\u7528\u6a21\u578b\u91cf\u5316\u4ee5\u8282\u7701\u663e\u5b58\uff0c\u8bf7\u53c2\u8003\u6211\u4eec\u7684 [Github Repo](https://github.com/THUDM/ChatGLM-6B)\u3002\n\n## \u534f\u8bae\n\n\u672c\u4ed3\u5e93\u7684\u4ee3\u7801\u4f9d\u7167 [Apache-2.0](LICENSE) \u534f\u8bae\u5f00\u6e90\uff0cChatGLM-6B \u6a21\u578b\u7684\u6743\u91cd\u7684\u4f7f\u7528\u5219\u9700\u8981\u9075\u5faa [Model License](MODEL_LICENSE)\u3002\n\n## \u5f15\u7528\n\n\u5982\u679c\u4f60\u89c9\u5f97\u6211\u4eec\u7684\u5de5\u4f5c\u6709\u5e2e\u52a9\u7684\u8bdd\uff0c\u8bf7\u8003\u8651\u5f15\u7528\u4e0b\u5217\u8bba\u6587\uff1a\n\n```\n@inproceedings{\n  zeng2023glm-130b,\n  title={{GLM}-130B: An Open Bilingual Pre-trained Model},\n  author={Aohan Zeng and Xiao Liu and Zhengxiao Du and Zihan Wang and Hanyu Lai and Ming Ding and Zhuoyi Yang and Yifan Xu and Wendi Zheng and Xiao Xia and Weng Lam Tam and Zixuan Ma and Yufei Xue and Jidong Zhai and Wenguang Chen and Zhiyuan Liu and Peng Zhang and Yuxiao Dong and Jie Tang},\n  booktitle={The Eleventh International Conference on Learning Representations (ICLR)},\n  year={2023},\n  url={https://openreview.net/forum?id=-Aw0rrrPUF}\n}\n```\n```\n@inproceedings{du2022glm,\n  title={GLM: General Language Model Pretraining with Autoregressive Blank Infilling},\n  author={Du, Zhengxiao and Qian, Yujie and Liu, Xiao and Ding, Ming and Qiu, Jiezhong and Yang, Zhilin and Tang, Jie},\n  booktitle={Proceedings of the 60th Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)},\n  pages={320--335},\n  year={2022}\n}\n```", "size_bytes": "3893083075", "downloads": 9}