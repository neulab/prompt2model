{"pretrained_model_name": "microsoft/tapex-large-sql-execution", "description": "---\nlanguage: en\ntags:\n- tapex\n- table-question-answering\nlicense: mit\n---\n\n# TAPEX (large-sized model) \n\nTAPEX was proposed in [TAPEX: Table Pre-training via Learning a Neural SQL Executor](https://arxiv.org/abs/2107.07653) by Qian Liu, Bei Chen, Jiaqi Guo, Morteza Ziyadi, Zeqi Lin, Weizhu Chen, Jian-Guang Lou. The original repo can be found [here](https://github.com/microsoft/Table-Pretraining).\n\n## Model description\n\nTAPEX (**Ta**ble **P**re-training via **Ex**ecution) is a conceptually simple and empirically powerful pre-training approach to empower existing models with *table reasoning* skills. TAPEX realizes table pre-training by learning a neural SQL executor over a synthetic corpus, which is obtained by automatically synthesizing executable SQL queries.\n\nTAPEX is based on the BART architecture, the transformer encoder-encoder (seq2seq) model with a bidirectional (BERT-like) encoder and an autoregressive (GPT-like) decoder.\n\n## Intended Uses\n\nYou can use the raw model for simulating neural SQL execution, i.e., employ TAPEX to execute a SQL query on a given table. However, the model is mostly meant to be fine-tuned on a supervised dataset. Currently TAPEX can be fine-tuned to tackle table question answering tasks and table fact verification tasks. See the [model hub](https://huggingface.co/models?search=tapex) to look for fine-tuned versions on a task that interests you.\n\n### How to Use\n\nHere is how to use this model in transformers:\n\n```python\nfrom transformers import TapexTokenizer, BartForConditionalGeneration\nimport pandas as pd\n\ntokenizer = TapexTokenizer.from_pretrained(\"microsoft/tapex-large-sql-execution\")\nmodel = BartForConditionalGeneration.from_pretrained(\"microsoft/tapex-large-sql-execution\")\n\ndata = {\n    \"year\": [1896, 1900, 1904, 2004, 2008, 2012],\n    \"city\": [\"athens\", \"paris\", \"st. louis\", \"athens\", \"beijing\", \"london\"]\n}\ntable = pd.DataFrame.from_dict(data)\n\n# tapex accepts uncased input since it is pre-trained on the uncased corpus\nquery = \"select year where city = beijing\"\nencoding = tokenizer(table=table, query=query, return_tensors=\"pt\")\n\noutputs = model.generate(**encoding)\n\nprint(tokenizer.batch_decode(outputs, skip_special_tokens=True))\n# ['2008']\n```\n\n### How to Fine-tuning\n\n\u26a0\ufe0f This model checkpoint is **ONLY** used for simulating neural SQL execution (i.e., employ TAPEX to execute a SQL query on a given table), and you **CANNOT** use this model for fine-tuning on downstream tasks. The one that can be used for fine-tuning is at [here](https://huggingface.co/microsoft/tapex-large).\n\n> This separation of two models for two kinds of intention is because of a known issue in BART large, and we recommend readers to see [this comment](https://github.com/huggingface/transformers/issues/15559#issuecomment-1062880564) for more details.\n\n### BibTeX entry and citation info\n\n```bibtex\n@inproceedings{\n    liu2022tapex,\n    title={{TAPEX}: Table Pre-training via Learning a Neural {SQL} Executor},\n    author={Qian Liu and Bei Chen and Jiaqi Guo and Morteza Ziyadi and Zeqi Lin and Weizhu Chen and Jian-Guang Lou},\n    booktitle={International Conference on Learning Representations},\n    year={2022},\n    url={https://openreview.net/forum?id=O50443AsCP}\n}\n```", "size_bytes": "1625550145", "downloads": 712}