{"pretrained_model_name": "henryu-lin/t5-large-samsum-deepspeed", "description": "\n---\nlanguage: en\ntags:\n- azureml\n- t5\n- summarization\n- deepspeed\nlicense: apache-2.0\ndatasets:\n- samsum\nmodel-index:\n- name: t5-large-samsum-deepspeed\n  results:\n  - task: \n      name: Abstractive Text Summarization\n      type: abstractive-text-summarization\n    dataset:\n      name: \"SAMSum Corpus: A Human-annotated Dialogue Dataset for Abstractive Summarization\" \n      type: samsum\nwidget:\n- text: | \n    Kevin: Hey man, are you excited to watch Finding Nemo tonight?\n    Henry: Yea, I can't wait to watch that same movie for the 89th time. Is Nate coming over to watch it with us tonight?\n    Kevin: Yep, he said he'll be arriving a bit later at around 7 since he gets off of work at 6. Have you taken out the garbage yet? It's starting to make the kitchen really smell.\n    Henry: Oh I forgot. I'll do that once I'm finished with my assignment for my math class. I didn't get to start on it until an hour ago, and it's due in 30 minutes.\n    Kevin: Okay dude, you should take it out as soon as possible. By the way, Nate is bringing his girlfriend and their cat too.\n    Henry: Nice, I'm really looking forward to seeing them again.\n---\n\n## `t5-large-samsum-deepspeed`\nThis model was trained using Microsoft's `AzureML` and `DeepSpeed`'s ZeRO 2 optimization. It was fine-tuned on the `SAMSum` corpus from `t5-large` checkpoint.\n\nMore information on the fine-tuning process (includes samples and benchmarks):  \n*(currently still WIP, major updates coming soon: 7/6/21~7/9/21)*\n\n## Resource Usage\nThese results are retrieved from AzureML Studio's resource monitoring module. All experiments were ran on AzureML's low priority clusters.\n\n| key | value |\n| --- | ----- |\n| AzureML SKU | ND40rs_v2 (8 X V100 32GB) |\n| Region | US West 2 |\n| Run Duration | 12m 47.13s |\n| Compute Cost (LowPriority/Dedicated) | $0.94/$4.69 (USD) |\n| Average CPU Utilization | 51.2% |\n| Average GPU Utilization | 42.0% |\n| GPU Memory Usage (Avg/Peak) | 24.85/28.79 (GB) |\n| Total GPU Energy Usage | 670.38 (kJ) |\n\n*Compute cost is calculated from run duration and SKU's price per hour. Updated SKU pricing could be found here: https://azure.microsoft.com/en-us/pricing/details/machine-learning/  \n*Peak memory usage is calculated from average peak across all utilized GPUs.  \n\n### Carbon Emissions\nThese results are obtained using `codecarbon`. The carbon emission is estimated from training runtime only (excluding setup and evaluation runtime).  \nCodeCarbon: https://github.com/mlco2/codecarbon  \n\n| key | value |\n| --- | ----- |\n| timestamp | 2021-07-08T06:29:27 |\n| duration | 515.5018835067749 |\n| emissions | 0.043562840982919106 |\n| energy_consumed | 0.14638051405550773 |\n| country_name | USA |\n| region | Washington |\n| cloud_provider | azure |\n| cloud_region | westus2 |\n\n## Hyperparameters\n```yaml\nfp16: True\nper device batch size: 8\neffective batch size: 64\nepoch: 3.0\nlearning rate: 1e-4\nweight decay: 0.1\nseed: 1\n```\n*Same `per device batch size` for evaluations\n\n### DeepSpeed\nOptimizer = `AdamW`, Scheduler = `WarmupDecayLR`, Offload = `none`\n```json\n  \"zero_optimization\": {\n    \"stage\": 2,\n    \"allgather_partitions\": true,\n    \"allgather_bucket_size\": 1300000000,\n    \"overlap_comm\": true,\n    \"reduce_scatter\": true,\n    \"reduce_bucket_size\": 1300000000,\n    \"contiguous_gradients\": true\n  }\n```\n\n## Usage\n```python\nfrom transformers import pipeline\nsummarizer = pipeline(\"summarization\", model=\"henryu-lin/t5-large-samsum-deepspeed\")\n\nconversation = '''Kevin: Hey man, are you excited to watch Finding Nemo tonight?\n    Henry: Yea, I can't wait to watch that same movie for the 89th time. Is Nate coming over to watch it with us tonight?\n    Kevin: Yep, he said he'll be arriving a bit later at around 7 since he gets off of work at 6. Have you taken out the garbage yet? It's starting to make the kitchen really smell.\n    Henry: Oh I forgot. I'll do that once I'm finished with my assignment for my math class. I didn't get to start on it until an hour ago, and it's due in 30 minutes.\n    Kevin: Okay dude, you should take it out as soon as possible. By the way, Nate is bringing his girlfriend and their cat too.\n    Henry: Nice, I'm really looking forward to seeing them again.\n'''\nsummarizer(conversation)\n```\n\n## Results\n| ROUGE | Score |\n| ----- | ----- |\n| eval_rouge1 | 53.0823 |\n| eval_rouge2 | 28.7097 |\n| eval_rougeL | 43.939 |\n| eval_rougeLsum | 49.067 |\n| predict_rouge1 | 51.6716 |\n| predict_rouge2 | 26.5372 |\n| predict_rougeL | 42.9681 |\n| predict_rougeLsum | 47.4084 |\n\n| Metric | Value |\n| ------ | ----- |\n| eval_gen_len | 26.4071 |\n| predict_gen_len | 25.9451 |\n| train_loss | 1.3212629926497115 |\n| eval_loss | 1.23828125 |\n| predict_loss | 1.2333984375 |\n| train_runtime | 515.2198 |\n| train_samples | 14732 |\n| train_samples_per_second | 85.781 |\n| train_steps_per_second | 1.345 |\n| eval_runtime | 61.275 |\n| eval_samples | 818 |\n| eval_samples_per_second | 13.35 |\n| eval_steps_per_second | 0.212 |\n| predict_runtime | 63.3732 |\n| predict_samples | 819 |\n| predict_samples_per_second | 12.923 |\n| predict_steps_per_second | 0.205 |\n| total_steps | 693 |\n| total_flos | 7.20140924616704e+16 |\n", "size_bytes": "2950794964", "downloads": 39}